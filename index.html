<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>levrx - portfolio</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/music.css">
</head>
<body>
  <div class="bg"></div>
  <div class="content">
    <h1 class="title">levrx
      <div class="aurora">
        <div class="aurora__item"></div>
        <div class="aurora__item"></div>
        <div class="aurora__item"></div>
        <div class="aurora__item"></div>
      </div>
    </h1>
    <p class="subtitle">a cybersecurity college student.</p>
    
    <div class="button-container">
      <a onclick="navigateTo('https://github.com/levrx'); updateCounter('github')">
        <button class="Btn">GitHub</button>
      </a>
      
      <a onclick="navigateTo('https://movies.levrx.lol'); updateCounter('movies')">
        <button class="Btn">Movies</button>
      </a>
      
      <a onclick="navigateTo('https://images.levrx.lol'); updateCounter('images')">
        <button class="Btn">Images</button>
      </a>
      
      <a onclick="navigateTo('https://discord.gg/nhwSnJGR'); updateCounter('discord')">
        <button class="Btn">Discord</button>
      </a>
    </div>
  </div>

  <div id="status-container">
    <a onclick="navigateTo('/images/kermit.gif')" id="status-text">@levrx._.</a>
    <img id="status-icon" src="" alt="Discord Status Icon">
  </div>

  <div id="eye-closure" class="eye-closure"></div> 
  
  <script>
    function navigateTo(url) {
      document.getElementById('eye-closure').classList.add('open');
      setTimeout(() => {
        window.location.href = url;
      }, 1000); 
    }
  </script>

  <script>
    const apiUrl = 'https://api.jsonbin.io/v3/b/66fed5dfe41b4d34e43c7029'; 
    const apiKey = '$2a$10$0oZ.ddWfHTT2jRxWe9PtteLVjwnajyLimUZKU33chPK1htpO6z9ge'; 

    function updateCounter(type) {
      fetch(apiUrl, {
          headers: {
              'X-Master-Key': apiKey
          }
      })
      .then(response => response.json())
      .then(data => {
          data.record[type]++;  // Increment the specific type
          updateViewCount(data.record);
      })
      .catch(error => console.error('Error fetching view count:', error));
    }

    function updateViewCount(updatedRecord) {
      fetch(apiUrl, {
          method: 'PUT',
          headers: {
              'Content-Type': 'application/json',
              'X-Master-Key': apiKey
          },
          body: JSON.stringify(updatedRecord)
      })
      .then(() => {
          console.log('View count updated successfully:', updatedRecord);
      })
      .catch(error => console.error('Error updating views:', error));
    }
  </script>

</body>
</html>
